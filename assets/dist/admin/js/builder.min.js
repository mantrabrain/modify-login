(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,o||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==t(o)?o:o+""}function n(e,o,n){return o=a(o),function(e,o){if(o&&("object"==t(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,r()?Reflect.construct(o,n||[],a(e).constructor):o.apply(e,n))}function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}jQuery(document).ready((function(t){var o=wp.element,r=o.Component,a=o.render,c=o.createElement,l=wp.components,s=l.ColorPicker,u=l.BaseControl;function p(t,e,o){var n=wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});n.on("select",(function(){var r=n.state().get("selection").first().toJSON();t.val(r.url).trigger("change"),e.find("img").attr("src",r.url),e.find(".filename").text(r.filename),e.find(".dimensions").text("".concat(r.width," × ").concat(r.height)),e.removeClass("hidden"),o.addClass("hidden"),d()})),n.open()}function d(){var e=t("#login-preview"),o={};t(".form-group input, .form-group textarea, .form-group select").each((function(){o[t(this).attr("name")]=t(this).val()}));var n=e[0].contentDocument||e[0].contentWindow.document,r=n.createElement("style"),a="\n            body.login {\n                ".concat(o.background_color?"background-color: ".concat(o.background_color,";"):"","\n                ").concat(o.background_image?"\n                    background-image: url('".concat(o.background_image,"');\n                    background-size: ").concat(o.background_size||"cover",";\n                    background-position: ").concat(o.background_position||"center center",";\n                    background-repeat: ").concat(o.background_repeat||"no-repeat",";\n                "):"background-image: none;","\n            }\n            #login {\n                ").concat(o.form_background?"background: ".concat(o.form_background,";"):"","\n                ").concat(o.form_border_radius?"border-radius: ".concat(o.form_border_radius,";"):"","\n                ").concat(o.form_padding?"padding: ".concat(o.form_padding,";"):"","\n            }\n            .wp-core-ui .button-primary {\n                ").concat(o.button_color?"background: ".concat(o.button_color,"; border-color: ").concat(o.button_color,";"):"","\n                ").concat(o.button_text_color?"color: ".concat(o.button_text_color,";"):"","\n            }\n        ");o.logo_url?a+="\n                .login h1 a {\n                    background-image: url('".concat(o.logo_url,"');\n                    ").concat(o.logo_width?"width: ".concat(o.logo_width,";"):"","\n                    ").concat(o.logo_height?"height: ".concat(o.logo_height,";"):"","\n                    background-size: contain;\n                    background-position: center;\n                    background-repeat: no-repeat;\n                    text-indent: -9999px;\n                    ").concat(o.logo_position?"text-align: ".concat(o.logo_position,";"):"","\n                }\n            "):a+="\n                .login h1 a {\n                    background-image: none;\n                    width: auto;\n                    height: auto;\n                    text-indent: 0;\n                }\n            ",o.custom_css&&(a+=o.custom_css),r.textContent=a,n.head.appendChild(r)}t(".color-picker").each((function(){var o=t(this),l=o.attr("id"),p=o.data("default-color")||"#ffffff",g=o.val()||p,f=t('<div class="gutenberg-color-picker-container"></div>');o.after(f);var m=t('<input type="hidden" id="'.concat(l,'" name="').concat(l,'" value="').concat(g,'">'));o.replaceWith(m);var v=function(t){function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n(this,o,[t])).state={color:t.initialColor,isOpen:!1},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(o,t),r=o,a=[{key:"render",value:function(){var t=this;return c(u,{id:this.props.inputId},c("div",{className:"color-picker-main flex items-center"},c("button",{type:"button",className:"color-picker-button",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},style:{backgroundColor:this.state.color,width:"32px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",boxShadow:"0 1px 0 #ccc"}}),c("input",{type:"text",className:"color-picker-input",value:this.state.color,onChange:function(e){var o=e.target.value;t.setState({color:o}),t.props.onChange(o)},style:{marginLeft:"8px",width:"80px",height:"32px",padding:"0 8px",borderRadius:"4px",border:"1px solid #ccc",fontFamily:"monospace"}}),c("button",{type:"button",className:"color-picker-clear",onClick:function(){t.setState({color:""}),t.props.onChange("")},style:{marginLeft:"4px",padding:"0",width:"28px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",background:"#f0f0f1",display:"flex",alignItems:"center",justifyContent:"center"}},c("span",{className:"dashicons dashicons-no-alt",style:{fontSize:"16px",width:"16px",height:"16px"}}))),this.state.isOpen&&c("div",{className:"color-picker-popover"},c(s,{color:this.state.color,onChangeComplete:function(e){var o=e.hex;t.setState({color:o}),t.props.onChange(o)}})))}}],a&&e(r.prototype,a),l&&e(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,l}(r);a(c(v,{inputId:l,initialColor:g,onChange:function(t){m.val(t).trigger("change"),d()}}),f[0])})),t(".media-dropzone").each((function(){var e=t(this),o=e.find(".dropzone-area"),n=e.find('input[type="hidden"]'),r=e.find(".image-preview"),a=r.find("img");e.data("target");if(n.val()){a.attr("src",n.val()),r.removeClass("hidden"),o.addClass("hidden");var i=new URL(n.val()).pathname.split("/").pop();r.find(".filename").text(i);var c=new Image;c.onload=function(){r.find(".dimensions").text("".concat(this.width," × ").concat(this.height))},c.src=n.val()}o.on("click",(function(t){t.preventDefault(),p(n,r,o)})),o.on("dragover",(function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("dragover")})),o.on("dragleave",(function(e){e.preventDefault(),e.stopPropagation(),t(this).removeClass("dragover")})),o.on("drop",(function(e){e.preventDefault(),e.stopPropagation(),t(this).removeClass("dragover"),p(n,r,o)})),e.find(".remove-image-button").on("click",(function(t){t.preventDefault(),n.val("").trigger("change"),r.addClass("hidden"),o.removeClass("hidden"),d()}))})),t(".toggle-image-properties").on("click",(function(e){e.preventDefault(),e.stopPropagation();var o=t(this).data("target"),n=t("#".concat(o));t(".image-properties.active").not(n).removeClass("active"),n.toggleClass("active"),n.hasClass("active")&&(n.closest("#modify-login-builder").length||t("#modify-login-builder").find("#".concat(o)).addClass("active"))})),t(document).on("click",(function(e){t(e.target).closest(".image-properties, .toggle-image-properties, .color-picker-popover, .color-picker-button").length||t(".image-properties.active").removeClass("active")})),t(".close-popover").on("click",(function(e){e.preventDefault(),t(this).closest(".image-properties").removeClass("active")})),t(".form-group input:not(.color-picker), .form-group textarea, .form-group select").on("change input",(function(){d()})),t(".save-button").on("click",(function(e){e.preventDefault();var o=t(this),n=new FormData;n.append("action","modify_login_save_builder_settings"),n.append("nonce",modifyLoginBuilder.nonce),t(".form-group input, .form-group textarea, .form-group select").each((function(){n.append(t(this).attr("name"),t(this).val())})),o.prop("disabled",!0).text("Saving..."),t.ajax({url:modifyLoginBuilder.ajax_url,type:"POST",data:n,processData:!1,contentType:!1,success:function(t){t.success?(o.text("Settings Saved!"),setTimeout((function(){o.text("Save Settings")}),2e3)):(o.text("Error Saving"),setTimeout((function(){o.text("Save Settings")}),2e3))},error:function(){o.text("Error Saving"),setTimeout((function(){o.text("Save Settings")}),2e3)},complete:function(){o.prop("disabled",!1)}})})),t("#reset-all-button").on("click",(function(e){e.preventDefault();var o=t('<div class="custom-modal-overlay"></div>'),n=t('\n            <div class="custom-modal bg-white rounded-lg shadow-lg w-96">\n                <div class="custom-modal-header px-5 py-4 border-b border-gray-200 flex items-center">\n                    <span class="dashicons dashicons-info text-blue-500 mr-2 text-xl"></span>\n                    <h3 class="custom-modal-title text-lg font-semibold text-gray-900">Reset Form</h3>\n                </div>\n                <div class="custom-modal-content p-5 text-gray-600">\n                    <p class="mb-2">You are about to reset all form fields to their default values.</p>\n                    <p class="mb-2">This will only reset the form, not save the changes.</p>\n                    <p>Click Save after resetting if you want to apply these changes.</p>\n                </div>\n                <div class="custom-modal-actions p-4 bg-gray-50 flex justify-end gap-3 rounded-b-lg">\n                    <button class="custom-modal-cancel px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Cancel</button>\n                    <button class="custom-modal-confirm px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Reset Form</button>\n                </div>\n            </div>\n        ');o.append(n),t("body").append(o),setTimeout((function(){o.addClass("active")}),10),n.find(".custom-modal-cancel").on("click",(function(){o.removeClass("active"),setTimeout((function(){o.remove()}),300)})),n.find(".custom-modal-confirm").on("click",(function(){o.removeClass("active"),setTimeout((function(){o.remove();var e=t("#reset-all-button");e.addClass("opacity-50"),t("input#background_color").val("").trigger("change"),t("input#form_background").val("").trigger("change"),t("input#button_color").val("").trigger("change"),t("input#button_text_color").val("").trigger("change"),t("input#background_image").val("").trigger("change"),t("input#logo_url").val("").trigger("change"),t("select#background_size").val("").trigger("change"),t("select#background_position").val("").trigger("change"),t("select#background_repeat").val("").trigger("change"),t("select#logo_position").val("").trigger("change"),t("input#form_border_radius").val("").trigger("change"),t("input#form_padding").val("").trigger("change"),t("input#logo_width").val("").trigger("change"),t("input#logo_height").val("").trigger("change"),t("textarea#custom_css").val("").trigger("change"),t(".image-preview").addClass("hidden"),t(".dropzone-area").removeClass("hidden"),t(".gutenberg-color-picker-container").each((function(){var e=t(this);e.prev('input[type="hidden"]');e.find(".color-picker-button").css("background-color","transparent"),e.find(".color-picker-input").val("")})),d(),showNotification("success","Form has been reset to default values. Click Save to apply changes."),e.removeClass("opacity-50")}),300)}))})),d()}))})();
//# sourceMappingURL=builder.min.js.map