(()=>{function t(o){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(o)}function o(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function e(o,e,a){return e=r(e),function(o,e){if(e&&("object"==t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o)}(o,n()?Reflect.construct(e,a||[],r(o).constructor):e.apply(o,a))}function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n=function(){return!!t})()}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function a(t,o){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},a(t,o)}function i(o){var e=function(o,e){if("object"!=t(o)||!o)return o;var n=o[Symbol.toPrimitive];if(void 0!==n){var r=n.call(o,e||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(o)}(o,"string");return"symbol"==t(e)?e:e+""}jQuery(document).ready((function(t){function n(o,e){t("#modify-login-notifications").length||t("body").append('<div id="modify-login-notifications" class="fixed top-4 right-4 z-50"></div>');var n="notification-"+Date.now(),a=t('\n            <div id="'.concat(n,'" class="notification p-4 mb-3 rounded-lg shadow-md flex items-center justify-between transform translate-x-full opacity-0 transition-all duration-300" style="min-width: 300px; max-width: 400px;">\n                <div class="flex items-center">\n                    <span class="notification-icon mr-3"></span>\n                    <p class="notification-message text-sm m-0">').concat(e,'</p>\n                </div>\n                <button class="notification-close ml-3 text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close">\n                    <span class="dashicons dashicons-no-alt"></span>\n                </button>\n            </div>\n        '));"success"===o?(a.addClass("bg-green-100 border-l-4 border-green-600 text-green-900"),a.find(".notification-icon").addClass("dashicons dashicons-yes-alt text-green-600")):"reset"===o?(a.addClass("bg-blue-100 border-l-4 border-blue-600 text-blue-900"),a.find(".notification-icon").addClass("dashicons dashicons-update text-blue-600")):(a.addClass("bg-red-100 border-l-4 border-red-600 text-red-900"),a.find(".notification-icon").addClass("dashicons dashicons-warning text-red-600")),t("#modify-login-notifications").append(a),setTimeout((function(){a.removeClass("translate-x-full opacity-0")}),10),a.find(".notification-close").on("click",(function(){r(n)})),setTimeout((function(){r(n)}),"success"===o||"reset"===o?5e3:8e3)}function r(o){var e=t("#".concat(o));e.addClass("translate-x-full opacity-0"),setTimeout((function(){e.remove()}),300)}var c=wp.element,s=c.Component,l=c.render,u=c.createElement,d=wp.components,p=d.ColorPicker,g=d.BaseControl;function f(t,o,e){var n=wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});n.on("select",(function(){var r=n.state().get("selection").first().toJSON();t.val(r.url).trigger("change"),o.find("img").attr("src",r.url),o.find(".filename").text(r.filename),o.find(".dimensions").text("".concat(r.width," × ").concat(r.height)),o.removeClass("hidden"),e.addClass("hidden"),m()})),n.open()}function m(){var o=t("#login-preview"),e={};t(".form-group input, .form-group textarea, .form-group select").each((function(){var o=t(this),n=o.attr("name"),r=o.val();e[n]=r,"logo_url"!==n&&"logo_width"!==n&&"logo_height"!==n||console.log("Sending ".concat(n," with value: ").concat(r))}));var n=o[0].contentDocument||o[0].contentWindow.document,r=n.createElement("style");r.id="modify-login-custom-css";var a=n.getElementById("modify-login-custom-css"),i="\n            body.login {\n                ".concat(e.background_color?"background-color: ".concat(e.background_color," !important;"):"","\n                ").concat(e.background_image?"position: relative !important;":"","\n            }\n            \n            ").concat(e.background_image?'\n                body.login::before {\n                    content: "" !important;\n                    position: absolute !important;\n                    top: 0 !important;\n                    left: 0 !important;\n                    width: 100% !important;\n                    height: 100% !important;\n                    background-image: url(\''.concat(e.background_image,"') !important;\n                    ").concat(e.background_size?"background-size: ".concat(e.background_size," !important;"):"","\n                    ").concat(e.background_position?"background-position: ".concat(e.background_position," !important;"):"","\n                    ").concat(e.background_repeat?"background-repeat: ".concat(e.background_repeat," !important;"):"","\n                    opacity: ").concat(e.background_opacity," !important;\n                    z-index: -1 !important;\n                }\n            "):"","\n            .login form {\n                ").concat(e.form_background?"background: ".concat(e.form_background," !important;"):"","\n                ").concat(e.form_border_radius?"border-radius: ".concat(e.form_border_radius," !important;"):"","\n                ").concat(e.form_padding?"padding: ".concat(e.form_padding," !important;"):"","\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.13) !important;\n            }\n            .wp-core-ui .button-primary {\n                ").concat(e.button_color?"background: ".concat(e.button_color," !important; border-color: ").concat(e.button_color," !important;"):"","\n                ").concat(e.button_text_color?"color: ".concat(e.button_text_color," !important;"):"","\n                text-decoration: none !important;\n                text-shadow: none !important;\n            }\n            \n            /* Link Colors */\n            ").concat(e.link_color?".login a, .login #nav a, .login #backtoblog a {\n                color: ".concat(e.link_color," !important;\n            }"):"","\n            \n            /* Link Hover Colors */\n            ").concat(e.link_hover_color?".login a:hover, .login #nav a:hover, .login #backtoblog a:hover {\n                color: ".concat(e.link_hover_color," !important;\n            }"):"","\n            \n            /* Form Label Colors */\n            ").concat(e.label_color?".login form label {\n                color: ".concat(e.label_color," !important;\n            }"):"","\n        ");if(e.logo_url&&(i+="\n                .login h1 a {\n                    background-image: url('".concat(e.logo_url,"') !important;\n                    ").concat(e.logo_width?"width: ".concat(e.logo_width," !important;"):"","\n                    ").concat(e.logo_height?"height: ".concat(e.logo_height," !important;"):"","\n                    background-size: contain !important;\n                    background-position: center !important;\n                    background-repeat: no-repeat !important;\n                    text-indent: -9999px !important;\n                    ").concat(e.logo_position?"text-align: ".concat(e.logo_position," !important;"):"","\n                    margin: 0 auto 25px auto !important;\n                }\n            ")),e.custom_css&&(i+=e.custom_css),r.textContent=i,a)a.innerHTML=i;else try{n.head.appendChild(r),console.log("Added new style element to preview")}catch(t){console.error("Error updating preview styles:",t)}}t(".color-picker").each((function(){var n=t(this),r=n.attr("id"),c=n.val()||"",d=t('<div class="gutenberg-color-picker-container"></div>');n.after(d);var f=t('<input type="hidden" id="'.concat(r,'" name="').concat(r,'" value="').concat(c,'">'));n.replaceWith(f);var h=function(t){function n(t){var o,r,a,c;return function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,n),o=e(this,n,[t]),r=o,c=function(){o.setState({color:""}),o.props.onChange(""),o.colorInputRef.current&&(o.colorInputRef.current.value="")},(a=i(a="clearColor"))in r?Object.defineProperty(r,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[a]=c,o.state={color:t.initialColor,isOpen:!1},o.colorInputRef=React.createRef(),o}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),o&&a(t,o)}(n,t),r=n,c=[{key:"componentDidUpdate",value:function(t){t.initialColor!==this.props.initialColor&&this.setState({color:this.props.initialColor})}},{key:"render",value:function(){var t=this;return u(g,{id:this.props.inputId},u("div",{className:"color-picker-main flex items-center"},u("button",{type:"button",className:"color-picker-button",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},style:{backgroundColor:this.state.color||"transparent",width:"32px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",boxShadow:"0 1px 0 #ccc"}}),u("input",{type:"text",className:"color-picker-input",value:this.state.color||"",ref:this.colorInputRef,onClick:function(){return t.setState({isOpen:!t.state.isOpen})},onChange:function(o){var e=o.target.value;t.setState({color:e}),t.props.onChange(e)},style:{marginLeft:"8px",width:"80px",height:"32px",padding:"0 8px",borderRadius:"4px",border:"1px solid #ccc",fontFamily:"monospace",cursor:"pointer"}}),u("button",{type:"button",className:"color-picker-clear",onClick:this.clearColor,style:{marginLeft:"4px",padding:"0",width:"28px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",background:"#f0f0f1",display:"flex",alignItems:"center",justifyContent:"center"}},u("span",{className:"dashicons dashicons-no-alt",style:{fontSize:"16px",width:"16px",height:"16px"}}))),this.state.isOpen&&u("div",{className:"color-picker-popover"},u(p,{color:this.state.color,onChangeComplete:function(o){var e=o.hex;t.setState({color:e}),t.props.onChange(e)}})))}}],c&&o(r.prototype,c),s&&o(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,s}(s);l(u(h,{inputId:r,initialColor:c,onChange:function(t){f.val(t).trigger("change"),m()}}),d[0])})),t(".media-dropzone").each((function(){var o=t(this),e=o.find(".dropzone-area"),n=o.find('input[type="hidden"]'),r=o.find(".image-preview"),a=r.find("img");o.data("target");if(n.val()){a.attr("src",n.val()),r.removeClass("hidden"),e.addClass("hidden");var i=new URL(n.val()).pathname.split("/").pop();r.find(".filename").text(i);var c=new Image;c.onload=function(){r.find(".dimensions").text("".concat(this.width," × ").concat(this.height))},c.src=n.val()}e.on("click",(function(t){t.preventDefault(),f(n,r,e)})),e.on("dragover",(function(o){o.preventDefault(),o.stopPropagation(),t(this).addClass("dragover")})),e.on("dragleave",(function(o){o.preventDefault(),o.stopPropagation(),t(this).removeClass("dragover")})),e.on("drop",(function(o){o.preventDefault(),o.stopPropagation(),t(this).removeClass("dragover"),f(n,r,e)})),o.find(".remove-image-button").on("click",(function(t){t.preventDefault(),n.val("").trigger("change"),r.addClass("hidden"),e.removeClass("hidden"),m()}))})),function(){t(".opacity-slider-container");var o=t(".opacity-slider-track"),e=t(".opacity-slider-fill"),n=t(".opacity-slider-handle"),r=t("#background_opacity"),a=t("#background_opacity_value");function i(t){var o=100*(t=Math.max(0,Math.min(1,t)));e.css("width","".concat(o,"%")),n.css("left","".concat(o,"%")),n.css("right","auto"),n.css("transform","translate(-50%, -50%)"),r.val(t),a.text("".concat(Math.round(o),"%"))}function c(t){var e;e="touchmove"===t.type||"touchstart"===t.type?t.originalEvent.touches[0].clientX:t.clientX;var n=o[0].getBoundingClientRect(),r=(e-n.left)/n.width;i(r=Math.max(0,Math.min(1,r))),m()}i(parseFloat(r.val())||1),o.on("mousedown touchstart",(function(o){o.preventDefault(),c(o),t(document).on("mousemove touchmove",c),t(document).on("mouseup touchend",(function(){t(document).off("mousemove touchmove",c),t(document).off("mouseup touchend")}))})),n.on("mousedown touchstart",(function(o){o.preventDefault(),o.stopPropagation(),t(document).on("mousemove touchmove",c),t(document).on("mouseup touchend",(function(){t(document).off("mousemove touchmove",c),t(document).off("mouseup touchend")}))})),n.on("keydown",(function(t){var o=parseFloat(r.val());switch(t.key){case"ArrowRight":case"ArrowUp":o=Math.min(1,o+.01);break;case"ArrowLeft":case"ArrowDown":o=Math.max(0,o-.01);break;case"Home":o=0;break;case"End":o=1;break;default:return}t.preventDefault(),i(o),m()}))}(),t(".toggle-image-properties").on("click",(function(o){o.preventDefault(),o.stopPropagation();var e=t(this).data("target"),n=t("#".concat(e));t(".image-properties.active").not(n).removeClass("active"),n.toggleClass("active"),n.hasClass("active")&&(n.closest("#modify-login-builder").length||t("#modify-login-builder").find("#".concat(e)).addClass("active"))})),t(document).on("click",(function(o){t(o.target).closest(".image-properties, .toggle-image-properties, .color-picker-popover, .color-picker-button").length||t(".image-properties.active").removeClass("active")})),t(".close-popover").on("click",(function(o){o.preventDefault(),t(this).closest(".image-properties").removeClass("active")})),t(".form-group input:not(.color-picker), .form-group textarea, .form-group select").on("change input",(function(){m()})),t(".save-button").on("click",(function(o){o.preventDefault();var e=t(this),r=new FormData;r.append("action","modify_login_save_builder_settings"),r.append("nonce",modifyLoginBuilder.nonce),t(".form-group input, .form-group textarea, .form-group select").each((function(){var o=t(this),e=o.attr("name"),n=o.val();r.append(e,n),"logo_url"!==e&&"logo_width"!==e&&"logo_height"!==e||console.log("Sending ".concat(e," with value: ").concat(n))})),e.prop("disabled",!0).text("Saving..."),t.ajax({url:modifyLoginBuilder.ajax_url,type:"POST",data:r,processData:!1,contentType:!1,success:function(t){t.success?(e.text("Settings Saved!"),setTimeout((function(){e.text("Save Settings")}),2e3),n("success","Settings saved successfully.")):(e.text("Error Saving"),setTimeout((function(){e.text("Save Settings")}),2e3),n("error",t.data||"Error saving settings. Please try again."))},error:function(t,o,r){e.text("Error Saving"),setTimeout((function(){e.text("Save Settings")}),2e3),n("error","Server error: "+(t.responseText||r))},complete:function(){e.prop("disabled",!1)}})})),t("#reset-all-button").on("click",(function(o){o.preventDefault();var e=t('<div class="custom-modal-overlay"></div>'),r=t('\n            <div class="custom-modal bg-white rounded-lg shadow-lg w-96">\n                <div class="custom-modal-header px-5 py-4 border-b border-gray-200 flex items-center">\n                    <span class="dashicons dashicons-info text-blue-500 mr-2 text-xl"></span>\n                    <h3 class="custom-modal-title text-lg font-semibold text-gray-900">Reset Form</h3>\n                </div>\n                <div class="custom-modal-content p-5 text-gray-600">\n                    <p class="mb-2">You are about to reset all form fields to their default values.</p>\n                    <p class="mb-2">This will only reset the form, not save the changes.</p>\n                    <p>Click Save after resetting if you want to apply these changes.</p>\n                </div>\n                <div class="custom-modal-actions p-4 bg-gray-50 flex justify-end gap-3 rounded-b-lg">\n                    <button class="custom-modal-cancel px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Cancel</button>\n                    <button class="custom-modal-confirm px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Reset Form</button>\n                </div>\n            </div>\n        ');e.append(r),t("body").append(e),setTimeout((function(){e.addClass("active")}),10),r.find(".custom-modal-cancel").on("click",(function(){e.removeClass("active"),setTimeout((function(){e.remove()}),300)})),r.find(".custom-modal-confirm").on("click",(function(){e.removeClass("active"),setTimeout((function(){e.remove();var o=t("#reset-all-button"),r=o.text();o.addClass("opacity-50").prop("disabled",!0).text("Resetting..."),t('.form-group input[type="text"]').val("").trigger("change"),t(".form-group select").each((function(){var o=t(this),e=o.find("option:first").val();o.val(e).trigger("change")})),t(".form-group textarea").val("").trigger("change"),t('.form-group input[type="hidden"]').val("").trigger("change"),t(".gutenberg-color-picker-container").each((function(){var o=t(this);o.next('input[type="hidden"]').val("").trigger("change"),o.find(".color-picker-button").css("background-color","transparent");var e=o.find(".color-picker-input");e.length&&e.val("");var n=o.find(".color-picker-clear");n.length&&n.trigger("click")})),t(".media-dropzone").each((function(){var o=t(this),e=o.find('input[type="hidden"]'),n=o.find(".image-preview"),r=o.find(".dropzone-area");e.val("").trigger("change"),n.addClass("hidden"),r.removeClass("hidden")})),t("#logo_width, #logo_height").val("").trigger("change"),t("#custom_css").val("").trigger("change");t(".opacity-slider-track");var a=t(".opacity-slider-fill"),i=t(".opacity-slider-handle"),c=t("#background_opacity_value"),s=t("#background_opacity");a.css("width","100%"),i.css("left","100%"),i.css("transform","translate(-50%, -50%)"),c.text("100%"),s.val(1).trigger("change"),m(),setTimeout((function(){o.removeClass("opacity-50").prop("disabled",!1).text(r),n("reset","Form has been reset. Click Save if you want to apply these changes.")}),500)}),300)}))})),m(),t("#builder-reset-confirm").on("click",(function(){}))}))})();
//# sourceMappingURL=builder.min.js.map