(()=>{function t(o){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(o)}function o(t,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e(r.key),r)}}function e(o){var e=function(o,e){if("object"!=t(o)||!o)return o;var n=o[Symbol.toPrimitive];if(void 0!==n){var r=n.call(o,e||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(o)}(o,"string");return"symbol"==t(e)?e:e+""}function n(o,e,n){return e=a(e),function(o,e){if(e&&("object"==t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o)}(o,r()?Reflect.construct(e,n||[],a(o).constructor):e.apply(o,n))}function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function i(t,o){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},i(t,o)}jQuery(document).ready((function(t){var e=wp.element,r=e.Component,a=e.render,c=e.createElement,l=wp.components,s=l.ColorPicker,u=l.BaseControl,p={background_color:"#ffffff",background_image:"",background_size:"cover",background_position:"center center",background_repeat:"no-repeat",background_opacity:1,logo_url:"",logo_width:"84px",logo_height:"84px",logo_position:"center",form_background:"#ffffff",form_border_radius:"4px",form_padding:"20px",button_color:"#0073aa",button_text_color:"#ffffff",custom_css:"",link_color:"",link_hover_color:"",label_color:""};function d(t,o,e){var n=wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});n.on("select",(function(){var r=n.state().get("selection").first().toJSON();t.val(r.url).trigger("change"),o.find("img").attr("src",r.url),o.find(".filename").text(r.filename),o.find(".dimensions").text("".concat(r.width," × ").concat(r.height)),o.removeClass("hidden"),e.addClass("hidden"),m()})),n.open()}function m(){var o=t("#login-preview"),e={};t(".form-group input, .form-group textarea, .form-group select").each((function(){e[t(this).attr("name")]=t(this).val()}));var n=o[0].contentDocument||o[0].contentWindow.document,r=n.createElement("style");r.id="modify-login-custom-css";var a=n.getElementById("modify-login-custom-css"),i="\n            body.login {\n                ".concat(e.background_color?"background-color: ".concat(e.background_color," !important;"):"","\n                ").concat(e.background_image?"position: relative !important;":"","\n            }\n            \n            ").concat(e.background_image?'\n                body.login::before {\n                    content: "" !important;\n                    position: absolute !important;\n                    top: 0 !important;\n                    left: 0 !important;\n                    width: 100% !important;\n                    height: 100% !important;\n                    background-image: url(\''.concat(e.background_image,"') !important;\n                    ").concat(e.background_size?"background-size: ".concat(e.background_size," !important;"):"","\n                    ").concat(e.background_position?"background-position: ".concat(e.background_position," !important;"):"","\n                    ").concat(e.background_repeat?"background-repeat: ".concat(e.background_repeat," !important;"):"","\n                    opacity: ").concat(e.background_opacity," !important;\n                    z-index: -1 !important;\n                }\n            "):"","\n            .login form {\n                ").concat(e.form_background?"background: ".concat(e.form_background," !important;"):"","\n                ").concat(e.form_border_radius?"border-radius: ".concat(e.form_border_radius," !important;"):"","\n                ").concat(e.form_padding?"padding: ".concat(e.form_padding," !important;"):"","\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.13) !important;\n            }\n            .wp-core-ui .button-primary {\n                ").concat(e.button_color?"background: ".concat(e.button_color," !important; border-color: ").concat(e.button_color," !important;"):"","\n                ").concat(e.button_text_color?"color: ".concat(e.button_text_color," !important;"):"","\n                text-decoration: none !important;\n                text-shadow: none !important;\n            }\n            \n            /* Link Colors */\n            ").concat(e.link_color?".login a, .login #nav a, .login #backtoblog a {\n                color: ".concat(e.link_color," !important;\n            }"):"","\n            \n            /* Link Hover Colors */\n            ").concat(e.link_hover_color?".login a:hover, .login #nav a:hover, .login #backtoblog a:hover {\n                color: ".concat(e.link_hover_color," !important;\n            }"):"","\n            \n            /* Form Label Colors */\n            ").concat(e.label_color?".login form label {\n                color: ".concat(e.label_color," !important;\n            }"):"","\n        ");e.logo_url&&(i+="\n                .login h1 a {\n                    background-image: url('".concat(e.logo_url,"') !important;\n                    ").concat(e.logo_width?"width: ".concat(e.logo_width," !important;"):"","\n                    ").concat(e.logo_height?"height: ".concat(e.logo_height," !important;"):"","\n                    background-size: contain !important;\n                    background-position: center !important;\n                    background-repeat: no-repeat !important;\n                    text-indent: -9999px !important;\n                    ").concat(e.logo_position?"text-align: ".concat(e.logo_position," !important;"):"","\n                    margin: 0 auto 25px auto !important;\n                }\n            ")),e.custom_css&&(i+=e.custom_css),r.textContent=i,a.innerHTML=i}t(".color-picker").each((function(){var e=t(this),l=e.attr("id"),p=e.data("default-color")||"#ffffff",d=e.val()||p,f=t('<div class="gutenberg-color-picker-container"></div>');e.after(f);var g=t('<input type="hidden" id="'.concat(l,'" name="').concat(l,'" value="').concat(d,'">'));e.replaceWith(g);var v=function(t){function e(t){var o;return function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e),(o=n(this,e,[t])).state={color:t.initialColor,isOpen:!1},o}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),o&&i(t,o)}(e,t),r=e,a=[{key:"render",value:function(){var t=this;return c(u,{id:this.props.inputId},c("div",{className:"color-picker-main flex items-center"},c("button",{type:"button",className:"color-picker-button",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},style:{backgroundColor:this.state.color,width:"32px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",boxShadow:"0 1px 0 #ccc"}}),c("input",{type:"text",className:"color-picker-input",value:this.state.color,onChange:function(o){var e=o.target.value;t.setState({color:e}),t.props.onChange(e)},style:{marginLeft:"8px",width:"80px",height:"32px",padding:"0 8px",borderRadius:"4px",border:"1px solid #ccc",fontFamily:"monospace"}}),c("button",{type:"button",className:"color-picker-clear",onClick:function(){t.setState({color:""}),t.props.onChange("")},style:{marginLeft:"4px",padding:"0",width:"28px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",background:"#f0f0f1",display:"flex",alignItems:"center",justifyContent:"center"}},c("span",{className:"dashicons dashicons-no-alt",style:{fontSize:"16px",width:"16px",height:"16px"}}))),this.state.isOpen&&c("div",{className:"color-picker-popover"},c(s,{color:this.state.color,onChangeComplete:function(o){var e=o.hex;t.setState({color:e}),t.props.onChange(e)}})))}}],a&&o(r.prototype,a),l&&o(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,l}(r);a(c(v,{inputId:l,initialColor:d,onChange:function(t){g.val(t).trigger("change"),m()}}),f[0])})),t(".media-dropzone").each((function(){var o=t(this),e=o.find(".dropzone-area"),n=o.find('input[type="hidden"]'),r=o.find(".image-preview"),a=r.find("img");o.data("target");if(n.val()){a.attr("src",n.val()),r.removeClass("hidden"),e.addClass("hidden");var i=new URL(n.val()).pathname.split("/").pop();r.find(".filename").text(i);var c=new Image;c.onload=function(){r.find(".dimensions").text("".concat(this.width," × ").concat(this.height))},c.src=n.val()}e.on("click",(function(t){t.preventDefault(),d(n,r,e)})),e.on("dragover",(function(o){o.preventDefault(),o.stopPropagation(),t(this).addClass("dragover")})),e.on("dragleave",(function(o){o.preventDefault(),o.stopPropagation(),t(this).removeClass("dragover")})),e.on("drop",(function(o){o.preventDefault(),o.stopPropagation(),t(this).removeClass("dragover"),d(n,r,e)})),o.find(".remove-image-button").on("click",(function(t){t.preventDefault(),n.val("").trigger("change"),r.addClass("hidden"),e.removeClass("hidden"),m()}))})),function(){t(".opacity-slider-container");var o=t(".opacity-slider-track"),e=t(".opacity-slider-fill"),n=t(".opacity-slider-handle"),r=t("#background_opacity"),a=t("#background_opacity_value");function i(t){var o=100*(t=Math.max(0,Math.min(1,t)));e.css("width","".concat(o,"%")),n.css("left","".concat(o,"%")),n.css("right","auto"),n.css("transform","translate(-50%, -50%)"),r.val(t),a.text("".concat(Math.round(o),"%"))}function c(t){var e;e="touchmove"===t.type||"touchstart"===t.type?t.originalEvent.touches[0].clientX:t.clientX;var n=o[0].getBoundingClientRect(),r=(e-n.left)/n.width;i(r=Math.max(0,Math.min(1,r))),m()}i(parseFloat(r.val())),o.on("mousedown touchstart",(function(o){o.preventDefault(),c(o),t(document).on("mousemove touchmove",c),t(document).on("mouseup touchend",(function(){t(document).off("mousemove touchmove",c),t(document).off("mouseup touchend")}))})),n.on("mousedown touchstart",(function(o){o.preventDefault(),o.stopPropagation(),t(document).on("mousemove touchmove",c),t(document).on("mouseup touchend",(function(){t(document).off("mousemove touchmove",c),t(document).off("mouseup touchend")}))})),n.on("keydown",(function(t){var o=parseFloat(r.val());switch(t.key){case"ArrowRight":case"ArrowUp":o=Math.min(1,o+.01);break;case"ArrowLeft":case"ArrowDown":o=Math.max(0,o-.01);break;case"Home":o=0;break;case"End":o=1;break;default:return}t.preventDefault(),i(o),m()}))}(),t(".toggle-image-properties").on("click",(function(o){o.preventDefault(),o.stopPropagation();var e=t(this).data("target"),n=t("#".concat(e));t(".image-properties.active").not(n).removeClass("active"),n.toggleClass("active"),n.hasClass("active")&&(n.closest("#modify-login-builder").length||t("#modify-login-builder").find("#".concat(e)).addClass("active"))})),t(document).on("click",(function(o){t(o.target).closest(".image-properties, .toggle-image-properties, .color-picker-popover, .color-picker-button").length||t(".image-properties.active").removeClass("active")})),t(".close-popover").on("click",(function(o){o.preventDefault(),t(this).closest(".image-properties").removeClass("active")})),t(".form-group input:not(.color-picker), .form-group textarea, .form-group select").on("change input",(function(){m()})),t(".save-button").on("click",(function(o){o.preventDefault();var e=t(this),n=new FormData;n.append("action","modify_login_save_builder_settings"),n.append("nonce",modifyLoginBuilder.nonce),t(".form-group input, .form-group textarea, .form-group select").each((function(){n.append(t(this).attr("name"),t(this).val())})),e.prop("disabled",!0).text("Saving..."),t.ajax({url:modifyLoginBuilder.ajax_url,type:"POST",data:n,processData:!1,contentType:!1,success:function(t){t.success?(e.text("Settings Saved!"),setTimeout((function(){e.text("Save Settings")}),2e3)):(e.text("Error Saving"),setTimeout((function(){e.text("Save Settings")}),2e3))},error:function(){e.text("Error Saving"),setTimeout((function(){e.text("Save Settings")}),2e3)},complete:function(){e.prop("disabled",!1)}})})),t("#reset-all-button").on("click",(function(o){o.preventDefault();var e=t('<div class="custom-modal-overlay"></div>'),n=t('\n            <div class="custom-modal bg-white rounded-lg shadow-lg w-96">\n                <div class="custom-modal-header px-5 py-4 border-b border-gray-200 flex items-center">\n                    <span class="dashicons dashicons-info text-blue-500 mr-2 text-xl"></span>\n                    <h3 class="custom-modal-title text-lg font-semibold text-gray-900">Reset Form</h3>\n                </div>\n                <div class="custom-modal-content p-5 text-gray-600">\n                    <p class="mb-2">You are about to reset all form fields to their default values.</p>\n                    <p class="mb-2">This will only reset the form, not save the changes.</p>\n                    <p>Click Save after resetting if you want to apply these changes.</p>\n                </div>\n                <div class="custom-modal-actions p-4 bg-gray-50 flex justify-end gap-3 rounded-b-lg">\n                    <button class="custom-modal-cancel px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">Cancel</button>\n                    <button class="custom-modal-confirm px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Reset Form</button>\n                </div>\n            </div>\n        ');e.append(n),t("body").append(e),setTimeout((function(){e.addClass("active")}),10),n.find(".custom-modal-cancel").on("click",(function(){e.removeClass("active"),setTimeout((function(){e.remove()}),300)})),n.find(".custom-modal-confirm").on("click",(function(){e.removeClass("active"),setTimeout((function(){e.remove();var o=t("#reset-all-button");if(o.addClass("opacity-50").prop("disabled",!0).text("Resetting..."),Object.keys(p).forEach((function(o){var e=t("input#".concat(o));if(e.length&&(e.val(p[o]).trigger("change"),e.prev(".gutenberg-color-picker-container").length)){var n=e.prev(".gutenberg-color-picker-container");n.find(".color-picker-button").css("background-color",p[o]),n.find(".color-picker-input").val(p[o])}var r=t("select#".concat(o));r.length&&r.val(p[o]).trigger("change");var a=t("textarea#".concat(o));a.length&&a.val(p[o]).trigger("change")})),!p.background_image){var n=t("input#background_image");n.val("").trigger("change");var r=n.closest(".media-dropzone").find(".image-preview"),a=n.closest(".media-dropzone").find(".dropzone-area");r.addClass("hidden"),a.removeClass("hidden")}if(!p.logo_url){var i=t("input#logo_url");i.val("").trigger("change");var c=i.closest(".media-dropzone").find(".image-preview"),l=i.closest(".media-dropzone").find(".dropzone-area");c.addClass("hidden"),l.removeClass("hidden")}m(),setTimeout((function(){o.removeClass("opacity-50").prop("disabled",!1).text("Reset All"),showNotification("success","Form has been reset to default values. Click Save to apply changes.")}),500)}),300)}))})),m()}))})();
//# sourceMappingURL=builder.min.js.map