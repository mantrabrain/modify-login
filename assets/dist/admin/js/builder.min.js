(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,o||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==t(o)?o:o+""}function n(e,o,n){return o=i(o),function(e,o){if(o&&("object"==t(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,r()?Reflect.construct(o,n||[],i(e).constructor):o.apply(e,n))}function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r=function(){return!!t})()}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}jQuery(document).ready((function(t){var o=wp.element,r=o.Component,i=o.render,c=o.createElement,l=wp.components,u=l.ColorPicker,s=l.BaseControl;console.log("Document ready - looking for reset button");var p=t(".reset-button");console.log("Reset button found:",p.length>0);var g={background_color:"#ffffff",background_image:"",background_size:"cover",background_position:"center center",background_repeat:"no-repeat",logo_url:"",logo_width:"84px",logo_height:"84px",logo_position:"center",form_background:"#ffffff",form_border_radius:"4px",form_padding:"20px",button_color:"#0073aa",button_text_color:"#ffffff",custom_css:""};function d(t,e,o){var n=wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});n.on("select",(function(){var r=n.state().get("selection").first().toJSON();t.val(r.url).trigger("change"),e.find("img").attr("src",r.url),e.find(".filename").text(r.filename),e.find(".dimensions").text("".concat(r.width," × ").concat(r.height)),e.removeClass("hidden"),o.addClass("hidden"),f()})),n.open()}function f(){var e=t("#login-preview"),o={};t(".form-group input, .form-group textarea, .form-group select").each((function(){o[t(this).attr("name")]=t(this).val()}));var n=e[0].contentDocument||e[0].contentWindow.document,r=n.createElement("style"),i="\n            body.login {\n                background-color: ".concat(o.background_color||"#ffffff",";\n                ").concat(o.background_image?"\n                    background-image: url('".concat(o.background_image,"');\n                    background-size: ").concat(o.background_size||"cover",";\n                    background-position: ").concat(o.background_position||"center center",";\n                    background-repeat: ").concat(o.background_repeat||"no-repeat",";\n                "):"background-image: none;","\n            }\n            #login {\n                background: ").concat(o.form_background||"#ffffff",";\n                border-radius: ").concat(o.form_border_radius||"4px",";\n                padding: ").concat(o.form_padding||"20px",";\n            }\n            .wp-core-ui .button-primary {\n                background: ").concat(o.button_color||"#0073aa",";\n                border-color: ").concat(o.button_color||"#0073aa",";\n                color: ").concat(o.button_text_color||"#ffffff",";\n            }\n        ");o.logo_url?i+="\n                .login h1 a {\n                    background-image: url('".concat(o.logo_url,"');\n                    width: ").concat(o.logo_width||"84px",";\n                    height: ").concat(o.logo_height||"84px",";\n                    background-size: contain;\n                    background-position: center;\n                    background-repeat: no-repeat;\n                    text-indent: -9999px;\n                    text-align: ").concat(o.logo_position||"center",";\n                }\n            "):i+="\n                .login h1 a {\n                    background-image: none;\n                    width: auto;\n                    height: auto;\n                    text-indent: 0;\n                }\n            ",o.custom_css&&(i+=o.custom_css),r.textContent=i,n.head.appendChild(r)}t(".color-picker").each((function(){var o=t(this),l=o.attr("id"),p=o.data("default-color")||"#ffffff",g=o.val()||p,d=t('<div class="gutenberg-color-picker-container"></div>');o.after(d);var m=t('<input type="hidden" id="'.concat(l,'" name="').concat(l,'" value="').concat(g,'">'));o.replaceWith(m);var v=function(t){function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n(this,o,[t])).state={color:t.initialColor,isOpen:!1},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(o,t),r=o,(i=[{key:"render",value:function(){var t=this;return c(s,{id:this.props.inputId},c("div",{className:"color-picker-main"},c("button",{type:"button",className:"color-picker-button",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},style:{backgroundColor:this.state.color,width:"32px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",boxShadow:"0 1px 0 #ccc"}}),c("span",{className:"color-picker-value",style:{marginLeft:"8px",lineHeight:"32px",verticalAlign:"top"}},this.state.color)),this.state.isOpen&&c("div",{className:"color-picker-popover"},c(u,{color:this.state.color,onChangeComplete:function(e){var o=e.hex;t.setState({color:o}),t.props.onChange(o)}})))}}])&&e(r.prototype,i),l&&e(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,l}(r);i(c(v,{inputId:l,initialColor:g,onChange:function(t){m.val(t).trigger("change"),f()}}),d[0])})),t(".media-dropzone").each((function(){var e=t(this),o=e.find(".dropzone-area"),n=e.find('input[type="hidden"]'),r=e.find(".image-preview"),i=r.find("img");e.data("target");if(n.val()){i.attr("src",n.val()),r.removeClass("hidden"),o.addClass("hidden");var a=new URL(n.val()).pathname.split("/").pop();r.find(".filename").text(a);var c=new Image;c.onload=function(){r.find(".dimensions").text("".concat(this.width," × ").concat(this.height))},c.src=n.val()}o.on("click",(function(t){t.preventDefault(),d(n,r,o)})),o.on("dragover",(function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("dragover")})),o.on("dragleave",(function(e){e.preventDefault(),e.stopPropagation(),t(this).removeClass("dragover")})),o.on("drop",(function(e){e.preventDefault(),e.stopPropagation(),t(this).removeClass("dragover"),d(n,r,o)})),e.find(".remove-image-button").on("click",(function(t){t.preventDefault(),n.val("").trigger("change"),r.addClass("hidden"),o.removeClass("hidden"),f()}))})),t(".toggle-image-properties").on("click",(function(e){e.preventDefault(),e.stopPropagation();var o=t(this).data("target"),n=t("#".concat(o));t(".image-properties.active").not(n).removeClass("active"),n.toggleClass("active"),n.hasClass("active")&&(n.closest("#modify-login-builder").length||t("#modify-login-builder").find("#".concat(o)).addClass("active"))})),t(document).on("click",(function(e){t(e.target).closest(".image-properties, .toggle-image-properties, .color-picker-popover, .color-picker-button").length||t(".image-properties.active").removeClass("active")})),t(".close-popover").on("click",(function(e){e.preventDefault(),t(this).closest(".image-properties").removeClass("active")})),t(".form-group input:not(.color-picker), .form-group textarea, .form-group select").on("change input",(function(){f()})),t(".save-button").on("click",(function(e){e.preventDefault();var o=t(this),n=new FormData;n.append("action","modify_login_save_builder_settings"),n.append("nonce",modifyLoginBuilder.nonce),t(".form-group input, .form-group textarea, .form-group select").each((function(){n.append(t(this).attr("name"),t(this).val())})),o.prop("disabled",!0).text("Saving..."),t.ajax({url:modifyLoginBuilder.ajax_url,type:"POST",data:n,processData:!1,contentType:!1,success:function(t){t.success?(o.text("Settings Saved!"),setTimeout((function(){o.text("Save Settings")}),2e3)):(o.text("Error Saving"),setTimeout((function(){o.text("Save Settings")}),2e3))},error:function(){o.text("Error Saving"),setTimeout((function(){o.text("Save Settings")}),2e3)},complete:function(){o.prop("disabled",!1)}})})),t(".reset-button").on("click",(function(e){e.preventDefault(),console.log("Reset button clicked");var o=t('<div class="ml-notification"></div>').css({position:"fixed",top:"30px",left:"50%",transform:"translateX(-50%)","background-color":"#f44336",color:"white",padding:"15px 25px","border-radius":"4px","z-index":"9999","box-shadow":"0 4px 8px rgba(0,0,0,0.2)","font-weight":"bold","font-size":"14px",display:"flex","align-items":"center","max-width":"90%",opacity:"0",transition:"opacity 0.3s ease"}).html('<span style="margin-right:10px;">⚠️</span> WARNING: You are about to reset all login customization settings to their default values!');t("body").append(o),setTimeout((function(){o.css("opacity","1")}),10),setTimeout((function(){if(confirm("Are you sure you want to reset all settings to their default values? This cannot be undone.")){var e=p;o.remove(),e.prop("disabled",!0).text("Resetting...");var n=new FormData;n.append("action","modify_login_reset_builder_settings"),n.append("nonce",modifyLoginBuilder.nonce),t.ajax({url:modifyLoginBuilder.ajax_url,type:"POST",data:n,processData:!1,contentType:!1,success:function(o){o.success?(t("input#background_color").val(g.background_color).trigger("change"),t("input#form_background").val(g.form_background).trigger("change"),t("input#button_color").val(g.button_color).trigger("change"),t("input#button_text_color").val(g.button_text_color).trigger("change"),t("input#background_image").val("").trigger("change"),t("input#logo_url").val("").trigger("change"),t("select#background_size").val(g.background_size).trigger("change"),t("select#background_position").val(g.background_position).trigger("change"),t("select#background_repeat").val(g.background_repeat).trigger("change"),t("select#logo_position").val(g.logo_position).trigger("change"),t("input#form_border_radius").val(g.form_border_radius).trigger("change"),t("input#form_padding").val(g.form_padding).trigger("change"),t("input#logo_width").val(g.logo_width).trigger("change"),t("input#logo_height").val(g.logo_height).trigger("change"),t("textarea#custom_css").val(g.custom_css).trigger("change"),t(".image-preview").addClass("hidden"),t(".dropzone-area").removeClass("hidden"),t(".gutenberg-color-picker-container").each((function(){var e=t(this),o=e.prev('input[type="hidden"]').attr("id"),n=g[o]||"#ffffff";e.find(".color-picker-button").css("background-color",n),e.find(".color-picker-value").text(n)})),f(),e.text("Reset Complete!")):e.text("Error Resetting")},error:function(){e.text("Error Resetting")},complete:function(){setTimeout((function(){e.prop("disabled",!1).text("Reset All")}),1500)}})}else o.remove()}),1e3)})),f()}))})();
//# sourceMappingURL=builder.min.js.map