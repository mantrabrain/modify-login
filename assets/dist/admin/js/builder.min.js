(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,n||"default");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function o(e,n,o){return n=i(n),function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,r()?Reflect.construct(n,o||[],i(e).constructor):n.apply(e,o))}function r(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(r=function(){return!!t})()}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}jQuery(document).ready((function(t){var n=wp.element,r=n.Component,i=n.render,c=n.createElement,u=wp.components,l=u.ColorPicker,s=u.BaseControl;function p(t,e,n){var o=wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1,library:{type:"image"}});o.on("select",(function(){var r=o.state().get("selection").first().toJSON();t.val(r.url).trigger("change"),e.find("img").attr("src",r.url),e.find(".filename").text(r.filename),e.find(".dimensions").text("".concat(r.width," × ").concat(r.height)),e.removeClass("hidden"),n.addClass("hidden"),f()})),o.open()}function f(){var e=t("#login-preview"),n={};t(".form-group input, .form-group textarea, .form-group select").each((function(){n[t(this).attr("name")]=t(this).val()}));var o=e[0].contentDocument||e[0].contentWindow.document,r=o.createElement("style"),i="\n            body.login {\n                background-color: ".concat(n.background_color||"#ffffff",";\n                ").concat(n.background_image?"\n                    background-image: url('".concat(n.background_image,"');\n                    background-size: ").concat(n.background_size||"cover",";\n                    background-position: ").concat(n.background_position||"center center",";\n                    background-repeat: ").concat(n.background_repeat||"no-repeat",";\n                "):"background-image: none;","\n            }\n            #login {\n                background: ").concat(n.form_background||"#ffffff",";\n                border-radius: ").concat(n.form_border_radius||"4px",";\n                padding: ").concat(n.form_padding||"20px",";\n            }\n            .wp-core-ui .button-primary {\n                background: ").concat(n.button_color||"#0073aa",";\n                border-color: ").concat(n.button_color||"#0073aa",";\n                color: ").concat(n.button_text_color||"#ffffff",";\n            }\n        ");n.logo_url?i+="\n                .login h1 a {\n                    background-image: url('".concat(n.logo_url,"');\n                    width: ").concat(n.logo_width||"84px",";\n                    height: ").concat(n.logo_height||"84px",";\n                    background-size: contain;\n                    background-position: center;\n                    background-repeat: no-repeat;\n                    text-indent: -9999px;\n                    text-align: ").concat(n.logo_position||"center",";\n                }\n            "):i+="\n                .login h1 a {\n                    background-image: none;\n                    width: auto;\n                    height: auto;\n                    text-indent: 0;\n                }\n            ",n.custom_css&&(i+=n.custom_css),r.textContent=i,o.head.appendChild(r)}t(".color-picker").each((function(){var n=t(this),u=n.attr("id"),p=n.data("default-color")||"#ffffff",d=n.val()||p,g=t('<div class="gutenberg-color-picker-container"></div>');n.after(g);var m=t('<input type="hidden" id="'.concat(u,'" name="').concat(u,'" value="').concat(d,'">'));n.replaceWith(m);var v=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=o(this,n,[t])).state={color:t.initialColor,isOpen:!1},e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(n,t),r=n,(i=[{key:"render",value:function(){var t=this;return c(s,{id:this.props.inputId},c("div",{className:"color-picker-main"},c("button",{type:"button",className:"color-picker-button",onClick:function(){return t.setState({isOpen:!t.state.isOpen})},style:{backgroundColor:this.state.color,width:"32px",height:"32px",borderRadius:"4px",border:"1px solid #ccc",cursor:"pointer",boxShadow:"0 1px 0 #ccc"}}),c("span",{className:"color-picker-value",style:{marginLeft:"8px",lineHeight:"32px",verticalAlign:"top"}},this.state.color)),this.state.isOpen&&c("div",{className:"color-picker-popover"},c(l,{color:this.state.color,onChangeComplete:function(e){var n=e.hex;t.setState({color:n}),t.props.onChange(n)}})))}}])&&e(r.prototype,i),u&&e(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,u}(r);i(c(v,{inputId:u,initialColor:d,onChange:function(t){m.val(t).trigger("change"),f()}}),g[0])})),t(".media-dropzone").each((function(){var e=t(this),n=e.find(".dropzone-area"),o=e.find('input[type="hidden"]'),r=e.find(".image-preview"),i=r.find("img");e.data("target");if(o.val()){i.attr("src",o.val()),r.removeClass("hidden"),n.addClass("hidden");var a=new URL(o.val()).pathname.split("/").pop();r.find(".filename").text(a);var c=new Image;c.onload=function(){r.find(".dimensions").text("".concat(this.width," × ").concat(this.height))},c.src=o.val()}n.on("click",(function(t){t.preventDefault(),p(o,r,n)})),n.on("dragover",(function(e){e.preventDefault(),e.stopPropagation(),t(this).addClass("dragover")})),n.on("dragleave",(function(e){e.preventDefault(),e.stopPropagation(),t(this).removeClass("dragover")})),n.on("drop",(function(e){e.preventDefault(),e.stopPropagation(),t(this).removeClass("dragover"),p(o,r,n)})),e.find(".remove-image-button").on("click",(function(t){t.preventDefault(),o.val("").trigger("change"),r.addClass("hidden"),n.removeClass("hidden"),f()}))})),t(".toggle-image-properties").on("click",(function(e){e.preventDefault(),e.stopPropagation();var n=t(this).data("target"),o=t("#".concat(n));t(".image-properties.active").not(o).removeClass("active"),o.toggleClass("active"),o.hasClass("active")&&(o.closest("#modify-login-builder").length||t("#modify-login-builder").find("#".concat(n)).addClass("active"))})),t(document).on("click",(function(e){t(e.target).closest(".image-properties, .toggle-image-properties, .color-picker-popover, .color-picker-button").length||t(".image-properties.active").removeClass("active")})),t(".close-popover").on("click",(function(e){e.preventDefault(),t(this).closest(".image-properties").removeClass("active")})),t(".form-group input:not(.color-picker), .form-group textarea, .form-group select").on("change input",(function(){f()})),t(".save-button").on("click",(function(e){e.preventDefault();var n=t(this),o=new FormData;o.append("action","modify_login_save_builder_settings"),o.append("nonce",modifyLoginBuilder.nonce),t(".form-group input, .form-group textarea, .form-group select").each((function(){o.append(t(this).attr("name"),t(this).val())})),n.prop("disabled",!0).text("Saving..."),t.ajax({url:modifyLoginBuilder.ajax_url,type:"POST",data:o,processData:!1,contentType:!1,success:function(t){t.success?(n.text("Settings Saved!"),setTimeout((function(){n.text("Save Settings")}),2e3)):(n.text("Error Saving"),setTimeout((function(){n.text("Save Settings")}),2e3))},error:function(){n.text("Error Saving"),setTimeout((function(){n.text("Save Settings")}),2e3)},complete:function(){n.prop("disabled",!1)}})})),f()}))})();
//# sourceMappingURL=builder.min.js.map