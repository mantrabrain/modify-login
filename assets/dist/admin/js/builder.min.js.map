{"version":3,"file":"admin\\js\\builder.min.js","mappings":"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","sources":["webpack://modify-login/./src/admin/js/builder.js"],"sourcesContent":["jQuery(document).ready(function($) {\r\n    // Initialize color pickers\r\n    $('input[type=\"color\"]').wpColorPicker();\r\n\r\n    // Handle image uploads\r\n    $('.upload-button').on('click', function(e) {\r\n        e.preventDefault();\r\n        const button = $(this);\r\n        const input = button.prev('input[type=\"text\"]');\r\n        const target = input.attr('id');\r\n\r\n        const frame = wp.media({\r\n            title: 'Select Image',\r\n            button: {\r\n                text: 'Use this image'\r\n            },\r\n            multiple: false\r\n        });\r\n\r\n        frame.on('select', function() {\r\n            const attachment = frame.state().get('selection').first().toJSON();\r\n            input.val(attachment.url);\r\n            updatePreview();\r\n        });\r\n\r\n        frame.open();\r\n    });\r\n\r\n    // Handle remove image buttons\r\n    $('.remove-button').on('click', function(e) {\r\n        e.preventDefault();\r\n        const button = $(this);\r\n        const input = button.prev().prev('input[type=\"text\"]');\r\n        input.val('');\r\n        updatePreview();\r\n    });\r\n\r\n    // Handle popover toggles\r\n    $('.toggle-image-properties').on('click', function(e) {\r\n        e.preventDefault();\r\n        const button = $(this);\r\n        const targetId = button.data('target');\r\n        const popover = $(`#${targetId}`);\r\n        \r\n        // Close any other open popovers\r\n        $('.image-properties.active').not(popover).removeClass('active');\r\n        \r\n        // Toggle current popover\r\n        popover.toggleClass('active');\r\n        \r\n        // Position the popover\r\n        if (popover.hasClass('active')) {\r\n            const buttonRect = button[0].getBoundingClientRect();\r\n            popover.css({\r\n                top: buttonRect.bottom + window.scrollY + 5,\r\n                left: buttonRect.left + window.scrollX - popover.width() + buttonRect.width\r\n            });\r\n        }\r\n    });\r\n    \r\n    // Close popovers when clicking outside\r\n    $(document).on('click', function(e) {\r\n        if (!$(e.target).closest('.image-properties, .toggle-image-properties').length) {\r\n            $('.image-properties.active').removeClass('active');\r\n        }\r\n    });\r\n    \r\n    // Close popovers when clicking close button\r\n    $('.close-popover').on('click', function(e) {\r\n        e.preventDefault();\r\n        $(this).closest('.image-properties').removeClass('active');\r\n    });\r\n\r\n    // Handle form changes\r\n    $('.form-group input, .form-group textarea, .form-group select').on('change input', function() {\r\n        updatePreview();\r\n    });\r\n\r\n    // Update preview iframe\r\n    function updatePreview() {\r\n        const preview = $('#login-preview');\r\n        const settings = {};\r\n        \r\n        // Collect all form values\r\n        $('.form-group input, .form-group textarea, .form-group select').each(function() {\r\n            settings[$(this).attr('name')] = $(this).val();\r\n        });\r\n\r\n        // Apply settings to preview iframe\r\n        const previewDoc = preview[0].contentDocument || preview[0].contentWindow.document;\r\n        const style = previewDoc.createElement('style');\r\n        \r\n        // Generate CSS based on current settings\r\n        let css = `\r\n            body.login {\r\n                background-color: ${settings.background_color || '#ffffff'};\r\n                ${settings.background_image ? `\r\n                    background-image: url('${settings.background_image}');\r\n                    background-size: ${settings.background_size || 'cover'};\r\n                    background-position: ${settings.background_position || 'center center'};\r\n                    background-repeat: ${settings.background_repeat || 'no-repeat'};\r\n                ` : 'background-image: none;'}\r\n            }\r\n            #login {\r\n                background: ${settings.form_background || '#ffffff'};\r\n                border-radius: ${settings.form_border_radius || '4px'};\r\n                padding: ${settings.form_padding || '20px'};\r\n            }\r\n            .wp-core-ui .button-primary {\r\n                background: ${settings.button_color || '#0073aa'};\r\n                border-color: ${settings.button_color || '#0073aa'};\r\n                color: ${settings.button_text_color || '#ffffff'};\r\n            }\r\n        `;\r\n        \r\n        // Add logo styles if logo is set\r\n        if (settings.logo_url) {\r\n            css += `\r\n                .login h1 a {\r\n                    background-image: url('${settings.logo_url}');\r\n                    width: ${settings.logo_width || '84px'};\r\n                    height: ${settings.logo_height || '84px'};\r\n                    background-size: contain;\r\n                    background-position: center;\r\n                    background-repeat: no-repeat;\r\n                    text-indent: -9999px;\r\n                    text-align: ${settings.logo_position || 'center'};\r\n                }\r\n            `;\r\n        } else {\r\n            css += `\r\n                .login h1 a {\r\n                    background-image: none;\r\n                    width: auto;\r\n                    height: auto;\r\n                    text-indent: 0;\r\n                }\r\n            `;\r\n        }\r\n        \r\n        // Add custom CSS\r\n        if (settings.custom_css) {\r\n            css += settings.custom_css;\r\n        }\r\n        \r\n        style.textContent = css;\r\n        previewDoc.head.appendChild(style);\r\n    }\r\n\r\n    // Handle save button\r\n    $('.save-button').on('click', function(e) {\r\n        e.preventDefault();\r\n        const button = $(this);\r\n        const formData = new FormData();\r\n\r\n        // Add action parameter for saving\r\n        formData.append('action', 'modify_login_save_builder_settings');\r\n        formData.append('nonce', modifyLoginBuilder.nonce);\r\n\r\n        // Collect all form values\r\n        $('.form-group input, .form-group textarea, .form-group select').each(function() {\r\n            formData.append($(this).attr('name'), $(this).val());\r\n        });\r\n\r\n        // Disable button and show loading state\r\n        button.prop('disabled', true).text('Saving...');\r\n\r\n        // Send AJAX request to save settings\r\n        $.ajax({\r\n            url: modifyLoginBuilder.ajax_url,\r\n            type: 'POST',\r\n            data: formData,\r\n            processData: false,\r\n            contentType: false,\r\n            success: function(response) {\r\n                if (response.success) {\r\n                    button.text('Settings Saved!');\r\n                    setTimeout(function() {\r\n                        button.text('Save Settings');\r\n                    }, 2000);\r\n                } else {\r\n                    button.text('Error Saving');\r\n                    setTimeout(function() {\r\n                        button.text('Save Settings');\r\n                    }, 2000);\r\n                }\r\n            },\r\n            error: function() {\r\n                button.text('Error Saving');\r\n                setTimeout(function() {\r\n                    button.text('Save Settings');\r\n                }, 2000);\r\n            },\r\n            complete: function() {\r\n                button.prop('disabled', false);\r\n            }\r\n        });\r\n    });\r\n    \r\n    // Initialize preview\r\n    updatePreview();\r\n}); "],"names":["jQuery","document","ready","$","updatePreview","preview","settings","each","this","attr","val","previewDoc","contentDocument","contentWindow","style","createElement","css","concat","background_color","background_image","background_size","background_position","background_repeat","form_background","form_border_radius","form_padding","button_color","button_text_color","logo_url","logo_width","logo_height","logo_position","custom_css","textContent","head","appendChild","wpColorPicker","on","e","preventDefault","input","prev","frame","wp","media","title","button","text","multiple","attachment","state","get","first","toJSON","url","open","targetId","data","popover","not","removeClass","toggleClass","hasClass","buttonRect","getBoundingClientRect","top","bottom","window","scrollY","left","scrollX","width","target","closest","length","formData","FormData","append","modifyLoginBuilder","nonce","prop","ajax","ajax_url","type","processData","contentType","success","response","setTimeout","error","complete"],"sourceRoot":""}